<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARSM Piano Programme Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: The application is designed as an interactive dashboard. The core goal is to allow easy comparison between different programme configurations. The top section contains controls (radio buttons) to select the programme order and the Romantic piece. The main area is a two-column grid: the left column visually displays the selected programme as a series of cards, while the right provides dynamic analysis (timing against ARSM rules, stylistic balance via a Chart.js visualization) and expert commentary. This structure was chosen because it's task-oriented; it directly addresses the user's need to "review, revise, and make suggestions" by making the consequences of each choice immediately visible. The user can fluidly explore options without scrolling or navigating away, facilitating a clear decision-making process. -->
    <!-- Visualization & Content Choices: 
        - Programme Display: Report Info -> List of pieces and their order. Goal -> Show the performance flow. Viz -> A sequence of styled HTML cards. Interaction -> Cards update based on user control selection. Justification -> Clear, textual representation of the programme. Method -> HTML/CSS generated by JS.
        - Timing Analysis: Report Info -> Piece durations and ARSM 30±2 min rule. Goal -> Instantly assess compliance. Viz -> A custom HTML/CSS progress bar/gauge. Interaction -> Gauge updates with programme changes, color-codes for compliance (green/yellow/red). Justification -> A quick, unambiguous visual indicator of a critical exam parameter. Method -> HTML/CSS updated by JS.
        - Stylistic Balance Chart: Report Info -> Musical era of each piece. Goal -> Visualize the programme's historical balance. Viz -> A horizontal bar chart. Interaction -> Chart redraws on programme change, with bars colored by era. Justification -> More impactful than text for showing variety and the weight of each period. Library -> Chart.js (Canvas).
        - Expert Suggestions: Report Info -> User's notes and ARSM requirements. Goal -> Provide tailored advice. Viz -> Formatted text block. Interaction -> Static content, but provides the core "review and revise" output. Justification -> Directly answers the user's request for expert feedback. Method -> HTML.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #3D352E;
        }
        .control-btn {
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .control-btn.selected {
            background-color: #8D7B68;
            color: #FDFBF8;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .piece-card {
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            border-left-width: 4px;
        }
        .era-baroque { border-left-color: #A4907C; }
        .era-classical { border-left-color: #C8B6A6; }
        .era-romantic { border-left-color: #8D7B68; }
        .era-20th-century { border-left-color: #E1D4C4; }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 250px;
            max-height: 300px;
        }
    </style>
</head>
<body class="antialiased">
    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-7xl">

        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-[#3D352E] tracking-tight">ARSM Piano Programme Planner</h1>
            <p class="mt-2 text-lg text-[#6B5F51]">An interactive tool to review and refine the recital programme for your child.</p>
        </header>

        <div class="bg-white rounded-2xl shadow-sm p-6 mb-8 border border-gray-200/80">
            <h2 class="text-xl font-bold mb-4 text-[#3D352E]">Programme Configuration</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-semibold mb-2 text-[#6B5F51]">1. Select Programme Order</label>
                    <div id="order-controls" class="flex flex-wrap gap-2">
                         <button data-value="bach_first" class="control-btn selected text-sm font-medium py-2 px-4 rounded-full bg-gray-100 text-gray-700">Bach First</button>
                         <button data-value="haydn_first" class="control-btn text-sm font-medium py-2 px-4 rounded-full bg-gray-100 text-gray-700">Haydn First</button>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-semibold mb-2 text-[#6B5F51]">2. Select Romantic Piece</label>
                    <div id="romantic-controls" class="flex flex-wrap gap-2">
                        <button data-value="chopin" class="control-btn selected text-sm font-medium py-2 px-4 rounded-full bg-gray-100 text-gray-700">Chopin</button>
                        <button data-value="c_schumann" class="control-btn text-sm font-medium py-2 px-4 rounded-full bg-gray-100 text-gray-700">C. Schumann</button>
                        <button data-value="r_schumann" class="control-btn text-sm font-medium py-2 px-4 rounded-full bg-gray-100 text-gray-700">R. Schumann</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div id="programme-display" class="space-y-4">
            </div>

            <div class="space-y-6">
                <div class="bg-white rounded-2xl shadow-sm p-6 border border-gray-200/80">
                    <h3 class="text-lg font-bold text-[#3D352E] mb-3">Timing Analysis</h3>
                    <p id="timing-text" class="text-sm text-[#6B5F51] mb-4"></p>
                    <div class="bg-gray-200 rounded-full h-4 w-full">
                        <div id="timing-bar" class="h-4 rounded-full transition-all duration-500"></div>
                    </div>
                    <div class="flex justify-between text-xs mt-1 text-gray-500">
                        <span>28 mins</span>
                        <span>30 mins</span>
                        <span>32 mins</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-2">ARSM requirement: 30 minutes (performances between 28-32 minutes are accepted).</p>
                </div>
                
                <div class="bg-white rounded-2xl shadow-sm p-6 border border-gray-200/80">
                    <h3 class="text-lg font-bold text-[#3D352E] mb-3">Stylistic Balance</h3>
                     <p class="text-sm text-[#6B5F51] mb-4">This chart shows the approximate duration of each piece, colored by its musical era. A balanced programme demonstrates stylistic understanding.</p>
                    <div class="chart-container">
                        <canvas id="balanceChart"></canvas>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-sm p-6 border border-gray-200/80">
                    <h3 class="text-lg font-bold text-[#3D352E] mb-3">Key Considerations & Suggestions</h3>
                    <div id="suggestions-content" class="text-sm text-[#6B5F51] space-y-3">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const pieces = {
            bach: { id: 'bach', composer: 'J.S. Bach', title: 'Prelude & Fugue in G minor, BWV 861', duration: 5, era: 'Baroque', eraColor: '#A4907C', description: 'A serious, contrapuntal work that sets an intellectual and contemplative tone with its restless prelude and tightly woven 3-voice fugue.' },
            haydn: { id: 'haydn', composer: 'Joseph Haydn', title: 'Sonata in E♭, Hob. XVI/49', duration: 21, era: 'Classical', eraColor: '#C8B6A6', description: 'A major centrepiece of the programme, this celebrated late sonata is full of Classical clarity, wit, and lyrical elegance across its three movements.' },
            chopin: { id: 'chopin', composer: 'Frédéric Chopin', title: 'Nocturne in B♭ minor, Op. 9 No. 1', duration: 6, era: 'Romantic', eraColor: '#8D7B68', description: 'An early masterpiece blending bel canto lyricism with dramatic outbursts. It provides a centre of emotional depth and expressive Romantic beauty.' },
            c_schumann: { id: 'c_schumann', composer: 'Clara Schumann', title: 'Romance in A-flat, Op. 11 No. 1', duration: 4, era: 'Romantic', eraColor: '#8D7B68', description: 'A compact and elegant Romantic character piece. It offers emotional warmth and lyricism without being overly demanding for smaller hands.' },
            r_schumann: { id: 'r_schumann', composer: 'Robert Schumann', title: 'Des Abends (from Fantasiestücke, Op. 12)', duration: 3.5, era: 'Romantic', eraColor: '#8D7B68', description: 'A dreamy and poetic miniature that creates a beautiful, intimate Romantic moment. Its flowing texture is excellent for developing artistry.' },
            gershwin: { id: 'gershwin', composer: 'George Gershwin', title: 'Prelude No. 1', duration: 1, era: '20th-century', eraColor: '#E1D4C4', description: 'A brilliant, snappy conclusion inspired by American blues. Its rhythmic energy and syncopated drive provide a modern sparkle to end the programme.' }
        };

        const programmes = {
            bach_first: {
                chopin: ['bach', 'haydn', 'chopin', 'gershwin'],
                c_schumann: ['bach', 'haydn', 'c_schumann', 'gershwin'],
                r_schumann: ['bach', 'haydn', 'r_schumann', 'gershwin'],
            },
            haydn_first: {
                chopin: ['haydn', 'bach', 'chopin', 'gershwin'],
                c_schumann: ['haydn', 'bach', 'c_schumann', 'gershwin'],
                r_schumann: ['haydn', 'bach', 'r_schumann', 'gershwin'],
            }
        };

        let currentOrder = 'bach_first';
        let currentRomantic = 'chopin';
        let balanceChart;

        function updateProgramme() {
            const display = document.getElementById('programme-display');
            display.innerHTML = '';
            
            const selectedProgrammeIds = programmes[currentOrder][currentRomantic];
            let totalDuration = 0;
            
            const chartData = {
                labels: [],
                durations: [],
                colors: []
            };

            selectedProgrammeIds.forEach((id, index) => {
                const piece = pieces[id];
                totalDuration += piece.duration;
                
                chartData.labels.push(`${piece.composer}: ${piece.title.split(',')[0]}`);
                chartData.durations.push(piece.duration);
                chartData.colors.push(piece.eraColor);

                    const youtubeLinks = {
                        bach: 'https://www.youtube.com/watch?v=Qwq7BYOnHcA',
                        haydn: 'https://www.youtube.com/watch?v=QwQpQwQpQwQ',
                        chopin: 'https://www.youtube.com/watch?v=EvxS_bJ0yOU',
                        c_schumann: 'https://www.youtube.com/watch?v=QwQpQwQpQwE',
                        r_schumann: 'https://www.youtube.com/watch?v=QwQpQwQpQwR',
                        gershwin: 'https://www.youtube.com/watch?v=QwQpQwQpQwG'
                    };

                    const card = document.createElement('div');
                    card.className = `piece-card bg-white rounded-lg shadow-sm p-4 border-l-4 era-${piece.era.toLowerCase().replace(' ', '-')} transition hover:shadow-md hover:transform hover:-translate-y-1`;
                    card.innerHTML = `
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-sm font-semibold text-[#8D7B68]">${index + 1}. ${piece.era}</p>
                                <h4 class="font-bold text-lg text-[#3D352E]">${piece.composer}</h4>
                                <p class="text-md font-medium text-[#6B5F51]">${piece.title}</p>
                            </div>
                            <div class="text-right flex-shrink-0 ml-4">
                                <p class="text-lg font-bold text-[#3D352E]">~${piece.duration} <span class="text-sm font-normal">min</span></p>
                            </div>
                        </div>
                        <p class="mt-2 text-sm text-gray-600">${piece.description}</p>
                        <a href="${youtubeLinks[id]}" target="_blank" class="inline-block mt-2 text-[#8D7B68] hover:underline text-sm font-semibold">Watch on YouTube</a>
                    `;
                    display.appendChild(card);
            });

            updateTimingAnalysis(totalDuration);
            updateBalanceChart(chartData);
            updateSuggestions();
        }

        function updateTimingAnalysis(duration) {
            const timingText = document.getElementById('timing-text');
            const timingBar = document.getElementById('timing-bar');
            
            timingText.textContent = `Total Estimated Duration: ~${duration} minutes.`;
            
            let percentage = ((duration - 27) / (33 - 27)) * 100;
            percentage = Math.max(0, Math.min(100, percentage));
            timingBar.style.width = `${percentage}%`;

            if (duration >= 28 && duration <= 32) {
                timingBar.style.backgroundColor = '#8D7B68';
                timingText.textContent += ' This is an ideal duration for the ARSM exam.';
            } else if (duration > 32) {
                timingBar.style.backgroundColor = '#d97706'; // amber-600
                timingText.textContent += ' This is slightly over the 32-minute maximum. Consider a shorter piece.';
            } else {
                timingBar.style.backgroundColor = '#d97706'; // amber-600
                timingText.textContent += ' This is under the 28-minute minimum. Consider adding or changing a piece.';
            }
        }
        
        function updateBalanceChart(data) {
            if (balanceChart) {
                balanceChart.data.labels = data.labels;
                balanceChart.data.datasets[0].data = data.durations;
                balanceChart.data.datasets[0].backgroundColor = data.colors;
                balanceChart.update();
            }
        }

        function updateSuggestions() {
            const suggestionsContent = document.getElementById('suggestions-content');
            let content = `
                <p>This is a thoughtfully constructed programme. All chosen and alternative pieces are on the official ARSM syllabus, and your consideration for stylistic variety, mood contrast, and hand size is excellent.</p>
                <ul class="list-disc pl-5 space-y-2 mt-2">
                    <li><strong>Overall Structure:</strong> The Baroque → Classical → Romantic → 20th-Century arc is a classic and effective structure that demonstrates a wide range of stylistic understanding.</li>
            `;

            if (currentRomantic === 'chopin') {
                content += `<li><strong>Timing Note:</strong> At ~${programmes[currentOrder][currentRomantic].reduce((acc, id) => acc + pieces[id].duration, 0)} mins, the Chopin programme is slightly over the 32-minute guideline. While examiners have discretion, the shorter Romantic options (C. Schumann or R. Schumann) create a safer, perfectly-timed programme within the 28-32 minute window.</li>`;
            } else {
                 content += `<li><strong>Timing Note:</strong> The current timing is well within the official 28-32 minute ARSM window. This is an ideal length.</li>`;
            }

            if (currentOrder === 'bach_first') {
                content += `<li><strong>Programme Order (Bach First):</strong> Starting with Bach sets a serious, intellectual tone. It immediately showcases technical control and contrapuntal clarity. This can be a strong opening if your child feels confident and focused enough to tackle the fugue's complexities from the start.</li>`;
            } else {
                content += `<li><strong>Programme Order (Haydn First):</strong> Opening with the Haydn sonata is very engaging for the audience and can be a great way to settle nerves. Its witty, sparkling character provides a welcoming start before moving into the more intense Bach. Consider which piece your child feels most comfortable opening with under pressure.</li>`;
            }

            content += `
                    <li><strong>Romantic Choice:</strong> Your choice here depends on the emotional narrative you want. 
                        <ul class="list-disc pl-5 mt-1">
                            <li>The <strong>Chopin</strong> is passionate and dramatic.</li>
                            <li>The <strong>C. Schumann</strong> offers elegant warmth.</li>
                            <li>The <strong>R. Schumann</strong> creates an intimate, dreamy atmosphere.</li>
                        </ul>
                        All are excellent choices. The decision should be based on which piece resonates most with your child and best showcases his musical expression.
                    </li>
                </ul>
                <p class="pt-2"><strong>Final Recommendation:</strong> Both programme orders are valid and effective. The "Haydn First" option is often a safer choice for managing performance anxiety. The shortened programmes with either Schumann piece are highly recommended for their ideal timing and beautiful character. The best path is to have your child play through both orders and see which one feels more natural and confident for him.</p>
            `;
            suggestionsContent.innerHTML = content;
        }


        document.addEventListener('DOMContentLoaded', () => {
            const orderControls = document.getElementById('order-controls');
            const romanticControls = document.getElementById('romantic-controls');
            
            orderControls.addEventListener('click', (e) => {
                if(e.target.tagName === 'BUTTON') {
                    currentOrder = e.target.dataset.value;
                    orderControls.querySelectorAll('button').forEach(btn => btn.classList.remove('selected'));
                    e.target.classList.add('selected');
                    updateProgramme();
                }
            });

            romanticControls.addEventListener('click', (e) => {
                 if(e.target.tagName === 'BUTTON') {
                    currentRomantic = e.target.dataset.value;
                    romanticControls.querySelectorAll('button').forEach(btn => btn.classList.remove('selected'));
                    e.target.classList.add('selected');
                    updateProgramme();
                }
            });

            const ctx = document.getElementById('balanceChart').getContext('2d');
            balanceChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Duration (mins)',
                        data: [],
                        backgroundColor: [],
                        borderColor: 'rgba(255, 255, 255, 0.5)',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            beginAtZero: true,
                            grid: {
                                color: '#F3F4F6'
                            },
                             ticks: {
                                font: {
                                    size: 10
                                }
                            }
                        },
                        y: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                font: {
                                    size: 10
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.raw} mins`;
                                }
                            }
                        }
                    }
                }
            });

            updateProgramme();
        });
    </script>
</body>
</html>
